System.register("chunks:///UI.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js"],(function(t,e){var a,n,o,i,s,r,l,p,C,c,g,d,v,u,y,f,m,I,h,L,U,b,x,P,B,H,k,E,T;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(t){a=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.defineProperty,i=t.assertThisInitialized,s=t.initializerDefineProperty},function(t){r=t.cclegacy,l=t._decorator,p=t.Prefab,C=t.find,c=t.Button,g=t.instantiate,d=t.Node,v=t.Label,u=t.Layout,y=t.ProgressBar,f=t.Sprite,m=t.Color,I=t.Animation,h=t.Component},function(t){L=t.Player}],execute:function(){r._RF.push({},"4211e/PRFxGa4OlVYyIy4re","UI",void 0),E=l.ccclass,T=l.property,t("UI",(U=E("UI"),b=T({type:p}),x=T({type:p}),U((H=a((B=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,o(i(e),"lastIndex",void 0),o(i(e),"playerData",void 0),s(i(e),"Model",H,i(e)),s(i(e),"RedPoint",k,i(e)),e}n(e,t);var a=e.prototype;return a.onLoad=function(){this.playerData=C("Canvas").getComponent(L).playerData,this.lastIndex=3,C("Canvas/UI/Layout/toPlayer").on(c.EventType.CLICK,this.toPlayer,this),C("Canvas/UI/Layout/toBag").on(c.EventType.CLICK,this.toBag,this),C("Canvas/UI/Layout/toSkill").on(c.EventType.CLICK,this.toSkill,this),C("Canvas/UI/Layout/toBattle").on(c.EventType.CLICK,this.toBattle,this),this.updateName()},a.update=function(){this.updateHead()},a.ShowRedPoint=function(t){if(!C(t+"/RedPoint")){var e=g(this.RedPoint);e.parent=C(t),C(t).on(d.EventType.TOUCH_START,(function(){e.destroy()}))}},a.updateName=function(){var t=this,e=this,a=this.playerData;this.setName(a),C("Canvas/UI/Header/Name").on(d.EventType.TOUCH_START,(function(){var n=g(t.Model);n.parent=C("Canvas"),C("Cancel",n).on(c.EventType.CLICK,(function(){n.destroy()}),t),C("Confirm",n).on(c.EventType.CLICK,(function(){var t=C("EditBox/TEXT_LABEL",n).getComponent(v).string;""!=t?a.Gold>100?(a.nickName=t,e.setName(a),a.Gold=C("Canvas").getComponent(L).fixed(a.Gold-100,0),C("Canvas").getComponent(L).setPlayerData(a),n.destroy()):C("Label",n).getComponent(v).string="*金币不足":C("Label",n).getComponent(v).string="*不能为空"}),t)}),this)},a.setName=function(t){C("Canvas/UI/Header/Name/Label").getComponent(v).string=t.nickName,C("Canvas/UI/Header/Name").getComponent(u).updateLayout()},a.updateHead=function(){var t=this.playerData;C("Canvas/UI/Header/Lv").getComponent(v).string=t.Level,C("Canvas/UI/Header/Hp/Label").getComponent(v).string=t.HP+"/"+t.MaxHp,C("Canvas/UI/Header/Hp").getComponent(y).progress=Number((t.HP/t.MaxHp).toFixed(2)),C("Canvas/UI/Header/Exp/Label").getComponent(v).string=t.EXP+"/"+C("Canvas").getComponent(L).levelUpNeedExp(t.Level),C("Canvas/UI/Header/Exp").getComponent(y).progress=Number((t.EXP/C("Canvas").getComponent(L).levelUpNeedExp(t.Level)).toFixed(2)),C("Canvas/UI/Header/Gold/GoldNum").getComponent(v).string=t.Gold},a.toPlayer=function(){this.changeIndex(0),this.lastIndex=0},a.toBag=function(){this.changeIndex(1),this.lastIndex=1},a.toSkill=function(){this.changeIndex(2),this.lastIndex=2},a.toBattle=function(){this.changeIndex(3),this.lastIndex=3},a.changeIndex=function(t){var e=this;switch(C("Canvas/UI/Layout/toPlayer").getComponent(f).color=new m("#646464"),C("Canvas/UI/Layout/toBag").getComponent(f).color=new m("#646464"),C("Canvas/UI/Layout/toSkill").getComponent(f).color=new m("#646464"),C("Canvas/UI/Layout/toBattle").getComponent(f).color=new m("#646464"),C("Canvas/UI/Layout/toPlayer").getComponent(c).interactable=!0,C("Canvas/UI/Layout/toBag").getComponent(c).interactable=!0,C("Canvas/UI/Layout/toSkill").getComponent(c).interactable=!0,C("Canvas/UI/Layout/toBattle").getComponent(c).interactable=!0,t){case 0:C("Canvas/UI/Layout/toPlayer").getComponent(f).color=new m("#ffffff"),C("Canvas/UI/Layout/toPlayer").getComponent(c).interactable=!1,a()||(C("Canvas/Player").getComponent(I).play("fromLeft"),C(n(this.lastIndex)).getComponent(I).play("toright"));break;case 1:C("Canvas/UI/Layout/toBag").getComponent(f).color=new m("#ffffff"),C("Canvas/UI/Layout/toBag").getComponent(c).interactable=!1,a()?(C("Canvas/Bag").getComponent(I).play("fromRight"),C(n(this.lastIndex)).getComponent(I).play("toleft")):(C("Canvas/Bag").getComponent(I).play("fromLeft"),C(n(this.lastIndex)).getComponent(I).play("toright"));break;case 2:C("Canvas/UI/Layout/toSkill").getComponent(f).color=new m("#ffffff"),C("Canvas/UI/Layout/toSkill").getComponent(c).interactable=!1,a()?(C("Canvas/Skills").getComponent(I).play("fromRight"),C(n(this.lastIndex)).getComponent(I).play("toleft")):(C("Canvas/Skills").getComponent(I).play("fromLeft"),C(n(this.lastIndex)).getComponent(I).play("toright"));break;case 3:C("Canvas/UI/Layout/toBattle").getComponent(f).color=new m("#ffffff"),C("Canvas/UI/Layout/toBattle").getComponent(c).interactable=!1,a()&&(C("Canvas/Battle").getComponent(I).play("fromRight"),C(n(this.lastIndex)).getComponent(I).play("toleft"))}function a(){return t>e.lastIndex}function n(t){var e;switch(t){case 0:e="Canvas/Player";break;case 1:e="Canvas/Bag";break;case 2:e="Canvas/Skills";break;case 3:e="Canvas/Battle"}return e}},e}(h)).prototype,"Model",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=a(B.prototype,"RedPoint",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=B))||P)),r._RF.pop()}}}));

System.register("chunks:///Player.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./UI.js"],(function(e,t){var a,n,i,r,o,l,p,s,c,u,y,d,v,h,f,P,C,m,D,g,H,x,b,E,L;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.defineProperty,r=e.assertThisInitialized,o=e.initializerDefineProperty},function(e){l=e.cclegacy,p=e._decorator,s=e.Prefab,c=e.find,u=e.Button,y=e.instantiate,d=e.Node,v=e.Label,h=e.ProgressBar,f=e.Component},function(e){P=e.UI}],execute:function(){l._RF.push({},"f471054CdFNOoYxGcVmhC9I","Player",void 0),E=p.ccclass,L=p.property,e("Player",(C=E("Player"),m=L({type:s}),D=L({type:s}),C((x=a((H=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,i(r(t),"callback",void 0),i(r(t),"playerData",void 0),o(r(t),"pop",x,r(t)),o(r(t),"Model",b,r(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.getPlayerData(),this.setEquipment(),this.playerData.Points>0&&c("Canvas").getComponent(P).ShowRedPoint("Canvas/UI/Header/Lv")},a.start=function(){c("Canvas/Player/ClearSave").on(u.EventType.CLICK,this.clickClearSave,this),this.secondHp()},a.update=function(e){this.updateUserInfo(),this.HP(),this.LevelUp()},a.HP=function(){var e=this.playerData;e.HP>e.MaxHp&&(e.HP=e.MaxHp)},a.secondHp=function(){var e=this.playerData;this.schedule(this.callback=function(){e.HP<e.MaxHp&&(e.HP=Number(e.HP)+Number(Number(e.HPS).toFixed(2)))},1)},a.clickClearSave=function(){var e=y(this.Model);e.parent=c("Canvas"),c("Cancel",e).on(u.EventType.CLICK,(function(){e.destroy()}),this),c("Confirm",e).on(u.EventType.CLICK,(function(){localStorage.removeItem("playerData"),localStorage.removeItem("hard"),window.location.reload()}),this)},a.getPlayerData=function(){this.playerData=JSON.parse(localStorage.getItem("playerData")),this.playerData||(this.playerData={nickName:"游客",Gold:0,MaxHp:1e3,EXP:0,ATK:50,AtkRate:500,Crit:.1,CritD:1.5,Level:1,LevelUpNeedExp:this.levelUpNeedExp(1),Points:10,UsedPoints:{ATK:0,MaxHp:0},HPS:5.5,bag:[],progress:99,equip:{weapon:{},clothes:{}},skill:[{name:"aoe",description:"攻击全体",ATK:100,cd:10}]},localStorage.setItem("playerData",JSON.stringify(this.playerData))),this.playerData.HP=this.playerData.MaxHp},a.levelUpNeedExp=function(e){return Number((5*Math.pow(e,.6)).toFixed(0))},a.setPlayerData=function(e){localStorage.setItem("playerData",JSON.stringify(e))},a.reset=function(e){this.playerData.HP=e},a.setEquipment=function(){for(var e in this.playerData.equip){var t=this.playerData.equip[e];this.changeEquipment(t)}},a.changeEquipment=function(e){var t=this;switch(e.type){case"武器":this.playerData.equip.weapon=e,a("SpriteSplash");break;case"衣服":this.playerData.equip.clothes=e,a("SpriteSplash-001")}function a(a){c("Canvas/Player/"+a).off(d.EventType.TOUCH_START),t.playerData.ATK=t.playerData.ATK+e.ATK,c("Canvas/Player/"+a+"/Label").getComponent(v).string=e.name,c("Canvas/Player/"+a).on(d.EventType.TOUCH_START,(function(a){var n=y(t.pop);n.parent=c("Canvas/Player"),c("Label",n).getComponent(v).string="物品名："+e.name+"\n攻击力："+e.ATK+"\n类别："+e.type,c("Button",n).on(u.EventType.CLICK,(function(e){n.destroy()}),t)}),t)}this.setPlayerData(this.playerData)},a.updateUserInfo=function(){var e=this.playerData;c("Player/Info",this.node).getComponent(v).string="\n等级："+e.Level+"\n生命值："+e.HP+"/"+e.MaxHp+"\n攻击力："+e.ATK+"\n经验值："+e.EXP+"/"+e.LevelUpNeedExp+"\n攻击速度："+100*Number((Number(e.AtkRate)/1e3).toFixed(2))+"%\n每秒恢复生命值："+e.HPS+"/s",c("Canvas/Battle/Player/HP").getComponent(h).progress=Number((e.HP/e.MaxHp).toFixed(2))},a.fixed=function(e,t){return Number(e.toFixed(t))},a.LevelUp=function(){var e=this.playerData;e.EXP>=e.LevelUpNeedExp&&(e.EXP=this.fixed(e.EXP-e.LevelUpNeedExp,0),e.Level=this.fixed(e.Level+1,0),e.LevelUpNeedExp=this.levelUpNeedExp(e.Level),e.Points=this.fixed(e.Points+2,0),c("Canvas").getComponent(P).ShowRedPoint("Canvas/UI/Header/Lv"),this.setPlayerData(e))},t}(f)).prototype,"pop",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=a(H.prototype,"Model",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=H))||g)),l._RF.pop()}}}));

System.register("chunks:///Bag.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js"],(function(t,e){var n,o,i,a,r,p,s,u,c,l,d,g,f,v,y,m,h,b,C,_,B,T,L,D,P,z;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.defineProperty,a=t.assertThisInitialized,r=t.initializerDefineProperty},function(t){p=t.cclegacy,s=t._decorator,u=t.Prefab,c=t.find,l=t.Label,d=t.instantiate,g=t.Node,f=t.Button,v=t.Component},function(t){y=t.Player}],execute:function(){p._RF.push({},"5ab506i6PpNp6tTjXEmO8MN","Bag",void 0),P=s.ccclass,z=s.property,t("Bag",(m=P("Bag"),h=z({type:u}),b=z({type:u}),C=z({type:u}),m((T=n((B=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),p=0;p<n;p++)o[p]=arguments[p];return e=t.call.apply(t,[this].concat(o))||this,i(a(e),"playerData",void 0),i(a(e),"bag",void 0),r(a(e),"goods",T,a(e)),i(a(e),"goodNodes",[]),r(a(e),"pop",L,a(e)),r(a(e),"equipBtn",D,a(e)),e}o(e,t);var n=e.prototype;return n.start=function(){},n.update=function(){},n.onLoad=function(){this.playerData=c("Canvas").getComponent(y).playerData,this.bag=this.playerData.bag;for(var t=0;t<this.bag.length;t++)this.setBag(this.bag[t])},n.updateGood=function(t,e){this.goodNodes[t].getComponent(l).string=e.name+"*"+e.num},n.setBag=function(t){var e=this,n=d(this.goods);t.num?n.getComponent(l).string=t.name+"*"+t.num:n.getComponent(l).string=t.name,n.getComponent(l).fontSize=20,n.parent=c("Canvas/Bag/Layout"),n.on(g.EventType.TOUCH_START,(function(n){var o=d(e.pop);if(t.ATK){c("Label",o).getComponent(l).string="物品名："+t.name+"\n攻击力："+t.ATK+"\n类别："+t.type;var i=d(e.equipBtn);i.parent=o,i.on(f.EventType.CLICK,(function(e){c("Canvas").getComponent(y).changeEquipment(t),o.destroy()}),e)}else c("Label",o).getComponent(l).string="介绍："+t.name;o.parent=c("Canvas/Bag"),c("Button",o).on(f.EventType.CLICK,(function(t){o.destroy()}),e)}),this),this.goodNodes.push(n)},e}(v)).prototype,"goods",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(B.prototype,"pop",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(B.prototype,"equipBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=B))||_)),p._RF.pop()}}}));

System.register("chunks:///Enemy.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js","./Bag.js","./Battle.js"],(function(e,a){var t,n,s,o,r,i,p,l,m,h,g,y,u,c,d;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inheritsLoose,n=e.defineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,i=e.find,p=e.ProgressBar,l=e.Label,m=e.Component},function(e){h=e.Player},function(e){g=e.Bag},function(e){y=e.Battle}],execute:function(){o._RF.push({},"8ec21OeeVxEfbc1CgDYIMvZ","Enemy",void 0),d=r.ccclass,r.property,e("Enemy",(u=d("Enemy"),u(c=function(e){function a(){for(var a,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return a=e.call.apply(e,[this].concat(o))||this,n(s(a),"enemyData",void 0),n(s(a),"enemyNow",void 0),n(s(a),"playerData",void 0),n(s(a),"HP",void 0),a}t(a,e);var o=a.prototype;return o.onLoad=function(){this.playerData=i("Canvas").getComponent(h).playerData,this.giveEnemyProperty(),this.HP=this.enemyNow.MaxHp},o.update=function(e){this.updateEnemyData()},o.updateEnemyData=function(){var e=this.enemyNow;if(i("HP",this.node).getComponent(p).progress=Number((e.MaxHp/this.HP).toFixed(2)),"lose"!=e.status){var a=i("Widget/Info",this.node);if(e.MaxHp<=0){switch(a.getComponent(l).string="lose",e.status="lose",e.Level){case"white":this.playerData.progress=this.playerData.progress+1;break;case"blue":this.playerData.progress=this.playerData.progress+2;break;case"gold":this.playerData.progress=this.playerData.progress+4}i("Canvas").getComponent(y).updateProgress();for(var t=0;t<e.spoils.length;t++)if(Math.random()<=e.spoils[t].chance){for(var n=!1,s=0;s<this.playerData.bag.length;s++){var o=this.playerData.bag[s];o.name==e.spoils[t].name&&(n=!0,o.num++,i("Canvas").getComponent(g).updateGood(s,o))}if(!n){var r={name:e.spoils[t].name,num:1};this.playerData.bag.push(r),i("Canvas").getComponent(g).setBag(r)}a.getComponent(l).string+="\n"+e.spoils[t].name}for(var m=0;m<e.equipment.length;m++)if(Math.random()<=e.equipment[m].chance){var u={name:e.equipment[m].name,ATK:e.equipment[m].ATK,type:e.equipment[m].type};this.playerData.bag.push(u),i("Canvas").getComponent(g).setBag(u),a.getComponent(l).string+="\n"+e.equipment[m].name}this.playerData.EXP=Number((this.playerData.EXP+e.EXP).toFixed(0)),this.playerData.Gold=Number((this.playerData.Gold+e.Gold).toFixed(0)),i("Canvas").getComponent(h).setPlayerData(this.playerData)}else a.getComponent(l).string=e.Level+"\n血量："+e.MaxHp+"\n攻击力："+e.ATK}},o.giveEnemyProperty=function(){this.enemyData=JSON.parse(JSON.stringify(globalThis.enemyData));var e,a=this.enemyData;(e=this.playerData.progress>=100?a.boss:Math.random()<a.gold.chance?a.gold:Math.random()<a.blue.chance&&Math.random()>a.gold.chance?a.blue:a.white).AtkRate=Number((e.AtkRate*(.3*Math.random()+1)).toFixed(0)),this.enemyNow=e},a}(m))||c)),o._RF.pop()}}}));

System.register("chunks:///Skill.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Enemy.js"],(function(e,t){var n,o,i,l,a,c,s,r,d,p,u,m,v;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){n=e.inheritsLoose,o=e.defineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,c=e.find,s=e.BlockInputEvents,r=e.Label,d=e.Component},function(e){p=e.Enemy}],execute:function(){l._RF.push({},"932b9aCUaZKUIqZWMAmtxwM","Skill",void 0),v=a.ccclass,a.property,e("Skill",(u=v("Skill"),u(m=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,o(i(t),"cd1",void 0),o(i(t),"cd1Time",void 0),t}n(t,e);var l=t.prototype;return l.start=function(){},l.skill1=function(e){var t=this;c("Canvas/Battle/skill1/Node").getComponent(s).enabled=!0,this.cd1=3,this.cd1Time=setInterval((function(){c("Canvas/Battle/skill1/Label").getComponent(r).string=t.cd1.toFixed(),t.cd1=t.cd1-1,t.cd1<=0&&(clearInterval(t.cd1Time),c("Canvas/Battle/skill1/Node").getComponent(s).enabled=!1)}),1e3),console.log(e);for(var n=0;n<e.enemyNodes.length;n++){var o=e.enemyNodes[n].getComponent(p).enemyNow;o.MaxHp=Number((o.MaxHp-100).toFixed()),e.enemyAtackedAnimation(e.enemyNodes[n])}},t}(d))||m)),l._RF.pop()}}}));

System.register("chunks:///Battle.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js","./Enemy.js","./Skill.js"],(function(e,t){var a,n,o,s,r,i,l,c,m,u,p,d,y,h,g,v,b,f,C,N,x,B,S,T,A,k,D,P,F,w,I;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,s=e.assertThisInitialized,r=e.defineProperty},function(e){i=e.cclegacy,l=e._decorator,c=e.Prefab,m=e.find,u=e.Node,p=e.Button,d=e.ProgressBar,y=e.Label,h=e.instantiate,g=e.Animation,v=e.RichText,b=e.Component},function(e){f=e.Player},function(e){C=e.Enemy},function(e){N=e.Skill}],execute:function(){i._RF.push({},"d56f6odbjhHCqU0stzg58sx","Battle",void 0),w=l.ccclass,I=l.property,l.integer,l.float,l.boolean,l.string,l.type,e("Battle",(x=w("Battle"),B=I({type:c}),S=I({type:c}),T=I({type:c}),x((D=a((k=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,o(s(t),"enemyPre",D,s(t)),o(s(t),"playerStatus",P,s(t)),o(s(t),"enemyStatus",F,s(t)),r(s(t),"enemyData",void 0),r(s(t),"playerData",void 0),r(s(t),"enemyNodes",[]),r(s(t),"num",5),r(s(t),"result",void 0),r(s(t),"time",void 0),r(s(t),"playerTime",void 0),r(s(t),"gameStartTime",void 0),r(s(t),"enemyNodesIndex",0),r(s(t),"boss",void 0),r(s(t),"cd1",void 0),r(s(t),"cd1Time",void 0),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.playerData=m("Canvas").getComponent(f).playerData,this.getenemyData(),this.updateProgress()},a.update=function(e){},a.start=function(){m("Canvas/Battle/SpriteSplash").on("touch-start",this.playerAtk,this),m("Canvas/Battle/SpriteSplash").on("touch-end",this.playerAtkStop,this),m("Canvas/Battle/skill1").on(u.EventType.TOUCH_START,this.playerSkill1,this),m("Canvas/Battle/Start/Button").on("click",this.startBtn,this),m("Canvas/Battle/ScrollView/view/content/Button").on(p.EventType.CLICK,this.Button,this),m("Canvas/Battle/ScrollView/view/content/Button-001").on(p.EventType.CLICK,this.Button,this),m("Canvas/Battle/ScrollView/view/content/Button-002").on(p.EventType.CLICK,this.Button,this)},a.updateProgress=function(){m("Canvas/Battle/ProgressBar").getComponent(d).progress=Number((this.playerData.progress>=100?100:this.playerData.progress/100).toFixed(2)),m("Canvas/Battle/ProgressLabel").getComponent(y).string=(this.playerData.progress>=100?"100":this.playerData.progress)+"%"},a.Button=function(e){switch(e.node.name){case"Button":localStorage.setItem("hard","1");break;case"Button-001":localStorage.setItem("hard","1.5");break;case"Button-002":localStorage.setItem("hard","2")}this.getenemyData()},a.success=function(){m("Canvas/Battle/Result").getComponent(y).string="成功",this.boss&&(this.playerData.progress=0,m("Canvas").getComponent(t).updateProgress()),this.boss=!1,this.battleEnd()},a.fail=function(){this.result&&(m("Canvas/Battle/Result").getComponent(y).string="失败",this.playerData.progress=Number((.8*this.playerData.progress).toFixed()),m("Canvas").getComponent(t).updateProgress(),this.battleEnd())},a.battleEnd=function(){m("Canvas").getComponent(f).setPlayerData(this.playerData),console.log("战斗结束");for(var e=0;e<this.enemyNodes.length;e++)clearInterval(this.time[e]);this.enemyNodesIndex=0,this.gameStart()},a.startBtn=function(){this.gameStart(),m("Canvas/Battle/Start").destroy()},a.gameStart=function(){var e=this,t=this,a=3,n=null;n=setInterval((function(){a>0?(m("Canvas/Battle/Result").getComponent(y).string=a.toString(),a--):clearInterval(n)}),1e3),clearTimeout(this.gameStartTime),this.gameStartTime=setTimeout((function(){for(var a=0;a<t.enemyNodes.length;a++)t.enemyNodes[a].destroy();if(t.enemyNodes=[],t.playerData.HP=t.playerData.MaxHp,t.result=null,m("Canvas/Battle/Result").getComponent(y).string="战斗开始",e.playerData.progress>=100){e.boss=!0;var n=h(e.enemyPre);n.parent=m("Canvas/Battle/Enemies"),e.enemyNodes.push(n),e.battleProcess(1)}else{for(var o=e.num,s=0;s<o;s++){var r=h(e.enemyPre);r.parent=m("Canvas/Battle/Enemies"),r.getComponent(g).play("showEnemy"),e.enemyNodes.push(r)}e.battleProcess(o)}}),4e3)},a.battleProcess=function(e){var t=this,a=this;this.time={};for(var n=0,o=function(o){var s=t.enemyNodes[o].getComponent(C).enemyNow;t.time[o]=setInterval((function(){if("lose"==s.status)++n==e&&a.success(),clearInterval(a.time[o]);else{t.enemyNodes[o].getComponent(g).play("enemyAtack");var r=h(a.playerStatus);r.parent=m("Canvas/Battle/Player"),r.getComponent(v).string="-"+Number(s.ATK).toFixed(),t.playerData.HP=Number((t.playerData.HP-s.ATK).toFixed()),r.getComponent(g).play("atacked"),t.playerData.HP<=0&&(t.playerData.HP=0,t.result="fail",t.fail())}}),s.AtkRate)},s=0;s<e;s++)o(s)},a.playerSkill1=function(){m("Canvas").getComponent(N).skill1(this)},a.enemyAtackedAnimation=function(e){var t=h(this.enemyStatus);t.parent=m("Widget",e),t.getComponent(v).string="-"+Number(this.playerData.ATK).toFixed(),t.getComponent(g).play("atacked")},a.playerAtkStop=function(){clearInterval(this.playerTime)},a.fixed=function(e,t){return Number(e.toFixed(t))},a.playerAtk=function(){var e=this;e.playerTime=setInterval((function(){!function(){if(m("Canvas/Battle/Player").getComponent(g).play("atack"),e.enemyNodes.length>0){var t=e.enemyNodesIndex,a=e.enemyNodes[t].getComponent(C).enemyNow;!function n(){"lose"==a.status&&t<e.num-1&&(t+=1,e.enemyNodes[t]&&(a=e.enemyNodes[t].getComponent(C).enemyNow,n()))}(),console.log(t),a.MaxHp=Number((a.MaxHp-e.playerData.ATK).toFixed()),e.enemyAtackedAnimation(e.enemyNodes[t])}}()}),e.playerData.AtkRate)},a.getenemyData=function(){var e=this,t=localStorage.getItem("hard");function a(e){var t;switch(e){case"boss":t=[{name:"白银",chance:1},{name:"黄金",chance:1}];break;case"white":t=[{name:"黑铁",chance:.7},{name:"黄铜",chance:.3}];break;case"blue":t=[{name:"黑铁",chance:.8},{name:"黄铜",chance:.5}];break;case"gold":t=[{name:"黑铁",chance:.9},{name:"黄铜",chance:.7}]}return t}function n(e,t){var a;switch(e){case"boss":a=[{name:"橙装",ATK:Number((10*t).toFixed(2)),type:"武器",chance:1}];break;case"white":a=[{name:"白装",ATK:Number((2*t).toFixed(2)),type:"武器",chance:.8},{name:"蓝装",ATK:Number((5*t).toFixed(2)),type:"衣服",chance:.2}];break;case"blue":a=[{name:"白装",ATK:Number((2*t).toFixed(2)),type:"衣服",chance:.5},{name:"蓝装",ATK:Number((5*t).toFixed(2)),type:"衣服",chance:.5}];break;case"gold":a=[{name:"白装",ATK:Number((2*t).toFixed(2)),type:"武器",chance:.4},{name:"蓝装",ATK:Number((5*t).toFixed(2)),type:"武器",chance:.7},{name:"橙装",ATK:Number((10*t).toFixed(2)),type:"武器",chance:.2}]}return a}function o(t){e.enemyData={boss:{Level:"boss",MaxHp:Number((400*t).toFixed(2)),ATK:Number((88*t).toFixed(2)),AtkRate:Number((1e3/t).toFixed(2)),spoils:a("boss"),equipment:n("boss",t),EXP:e.fixed(10*t,0),Gold:100},white:{Level:"white",MaxHp:Number((200*t).toFixed(2)),ATK:Number((5*t).toFixed(2)),AtkRate:Number((800/t).toFixed(2)),spoils:a("white"),equipment:n("white",t),EXP:e.fixed(1*t,0),Gold:10},blue:{Level:"blue",MaxHp:Number((300*t).toFixed(2)),ATK:Number((6*t).toFixed(2)),chance:.3,AtkRate:Number((700/t).toFixed(2)),spoils:a("blue"),equipment:n("blue",t),EXP:e.fixed(2*t,0),Gold:20},gold:{Level:"gold",MaxHp:Number((350*t).toFixed(2)),ATK:Number((7*t).toFixed(2)),chance:.1,AtkRate:Number((600/t).toFixed(2)),spoils:a("gold"),equipment:n("gold",t),EXP:e.fixed(4*t,0),Gold:40}},globalThis.enemyData=e.enemyData}t?o(Number(t)):(localStorage.setItem("hard","1"),o(1))},t}(b)).prototype,"enemyPre",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=a(k.prototype,"playerStatus",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=a(k.prototype,"enemyStatus",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=k))||A)),i._RF.pop()}}}));

System.register("chunks:///Main.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(n,t){var o,i,c,e,r,s,u;return n({_dec:void 0,_class:void 0}),{setters:[function(n){o=n.inheritsLoose},function(n){i=n.cclegacy,c=n._decorator,e=n.Component}],execute:function(){i._RF.push({},"7d072+GuL5Gv6TiYcwzlm7S","Main",void 0),u=c.ccclass,c.property,n("Main",(r=u("Main"),r(s=function(n){function t(){return n.apply(this,arguments)||this}o(t,n);var i=t.prototype;return i.start=function(){},i.onLoad=function(){},t}(e))||s)),i._RF.pop()}}}));

System.register("chunks:///Points.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js"],(function(t,n){var e,a,i,o,r,s,p,l,u,y,c,f,P,d,v,C,g,D,m,T,N,h;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.defineProperty,o=t.assertThisInitialized,r=t.initializerDefineProperty},function(t){s=t.cclegacy,p=t._decorator,l=t.Prefab,u=t.find,y=t.Node,c=t.instantiate,f=t.Label,P=t.Button,d=t.Component},function(t){v=t.Player}],execute:function(){s._RF.push({},"3832eEW3ZJCMpCUk4QhquUL","Points",void 0),N=p.ccclass,h=p.property,t("Points",(C=N("Points"),g=h({type:l}),C((T=e((m=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return n=t.call.apply(t,[this].concat(a))||this,i(o(n),"playerData",void 0),r(o(n),"Points",T,o(n)),n}a(n,t);var e=n.prototype;return e.onLoad=function(){this.playerData=u("Canvas").getComponent(v).playerData,this.getPoints()},e.fixed=function(t,n){return Number(t.toFixed(n))},e.getPoints=function(){var t=this,n=this;u("Canvas/UI/Header/Lv").on(y.EventType.TOUCH_START,(function(){var e=c(n.Points);e.parent=u("Canvas");var a=JSON.parse(JSON.stringify(n.playerData.UsedPoints)),i=JSON.parse(JSON.stringify(n.playerData.UsedPoints)),o=JSON.parse(JSON.stringify(n.playerData.Points));function r(t){u("Skills/"+t+"/Left/Num",e).getComponent(f).string=a[t],u("Skills/"+t+"/Button",e).on(P.EventType.CLICK,(function(){o>0&&(o--,u("Points/PointsNum",e).getComponent(f).string=o,a[t]++,u("Skills/"+t+"/Left/Num",e).getComponent(f).string=a[t])}),this)}u("Points/PointsNum",e).getComponent(f).string=o,r("ATK"),r("MaxHp"),u("Reset",e).on(P.EventType.CLICK,(function(){for(var t in a)o+=a[t],u("Points/PointsNum",e).getComponent(f).string=o,a[t]=0,u("Skills/"+t+"/Left/Num",e).getComponent(f).string="0"}),t),u("Confirm",e).on(P.EventType.CLICK,(function(){n.playerData.ATK=n.playerData.ATK-5*i.ATK,n.playerData.MaxHp=n.playerData.MaxHp-100*i.MaxHp,n.playerData.ATK=n.playerData.ATK+5*a.ATK,n.playerData.MaxHp=n.playerData.MaxHp+100*a.MaxHp,n.playerData.Points=o,n.playerData.UsedPoints=a,u("Canvas").getComponent(v).setPlayerData(n.playerData),e.destroy()}),t),u("Cancel",e).on(P.EventType.CLICK,(function(){e.destroy()}),t)}))},n}(d)).prototype,"Points",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=m))||D)),s._RF.pop()}}}));

System.register("chunks:///Status.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,s){var n,e,o,c,r,u,i;return t({_dec:void 0,_class:void 0}),{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,c=t.Component}],execute:function(){e._RF.push({},"cb03bAWCsVBLKj6HAKlB1zb","Status",void 0),i=o.ccclass,o.property,t("Status",(r=i("Status"),r(u=function(t){function s(){return t.apply(this,arguments)||this}n(s,t);var e=s.prototype;return e.start=function(){},e.statusDone=function(){this.node.destroy()},s}(c))||u)),e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["../UI.js","../Player.js","../Bag.js","../Enemy.js","../Skill.js","../Battle.js","../Main.js","../Points.js","../Status.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/ts/UI.js', 'chunks:///UI.js');
  r('project:///assets/ts/Player.js', 'chunks:///Player.js');
  r('project:///assets/ts/Bag.js', 'chunks:///Bag.js');
  r('project:///assets/ts/Enemy.js', 'chunks:///Enemy.js');
  r('project:///assets/ts/Skill.js', 'chunks:///Skill.js');
  r('project:///assets/ts/Battle.js', 'chunks:///Battle.js');
  r('project:///assets/ts/Main.js', 'chunks:///Main.js');
  r('project:///assets/ts/Points.js', 'chunks:///Points.js');
  r('project:///assets/ts/Status.js', 'chunks:///Status.js');
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});