System.register("chunks:///Player.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var a,r,n,i,o,l,s,c,p,y,d,u,v,P,f,h,C,D,H,m;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.defineProperty,i=e.assertThisInitialized,o=e.initializerDefineProperty},function(e){l=e.cclegacy,s=e._decorator,c=e.Prefab,p=e.find,y=e.Button,d=e.instantiate,u=e.Label,v=e.Component}],execute:function(){l._RF.push({},"f471054CdFNOoYxGcVmhC9I","Player",void 0),H=s.ccclass,m=s.property,e("Player",(P=H("Player"),f=m({type:c}),P((D=a((C=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(i(t),"callback",void 0),n(i(t),"playerData",void 0),o(i(t),"Model",D,i(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){this.getPlayerData()},a.start=function(){p("Canvas/Player/ClearSave").on(y.EventType.CLICK,this.clickClearSave,this),this.secondHp()},a.update=function(e){this.updateUserInfo(),this.HP()},a.HP=function(){var e=this.playerData;e.HP>e.MaxHp&&(e.HP=e.MaxHp)},a.secondHp=function(){var e=this.playerData;this.schedule(this.callback=function(){e.HP<e.MaxHp&&(e.HP=Number(e.HP)+Number(Number(e.HPS).toFixed(2)))},1)},a.clickClearSave=function(){var e=d(this.Model);p("Canvas/Player/Model")||(e.parent=p("Canvas/Player"),e.setPosition(0,0)),p("Canvas/Player/Model/Cancel").on(y.EventType.CLICK,(function(){e.destroy()}),this),p("Canvas/Player/Model/Confirm").on(y.EventType.CLICK,(function(){localStorage.removeItem("playerData"),localStorage.removeItem("enemyData"),window.location.reload()}),this)},a.getPlayerData=function(){this.playerData=JSON.parse(localStorage.getItem("playerData")),this.playerData||(this.playerData={MaxHp:300,EXP:0,ATK:40,AtkRate:"200",Crit:.1,CritD:1.5,Level:1,LevelUpNeedExp:[0,5,20,50,100,"Max"],Points:10,HPS:5.5,addPoints:{MaxHp:0,ATK:0,Crit:0,CritD:0,HPS:0}},localStorage.setItem("playerData",JSON.stringify(this.playerData))),this.playerData.HP=this.playerData.MaxHp},a.setPlayerData=function(e){localStorage.setItem("playerData",JSON.stringify(e))},a.reset=function(e){this.playerData.HP=e},a.updateUserInfo=function(){var e=this.playerData;p("Info",this.node).getComponent(u).string="\n等级："+e.Level+"\n生命值："+e.HP+"/"+e.MaxHp+"\n攻击力："+e.ATK+"\n经验值："+e.EXP+"/"+e.LevelUpNeedExp[e.Level]+"\n暴击率："+(100*e.Crit).toFixed(2)+"%\n暴击伤害："+(100*e.CritD).toFixed(2)+"%\n每秒恢复生命值："+e.HPS+"/s"},t}(v)).prototype,"Model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=C))||h)),l._RF.pop()}}}));

System.register("chunks:///Enemy.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,n){var t,o,a,i,r,c,s,l,u,m,p;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inheritsLoose,o=e.defineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,c=e.find,s=e.Label,l=e.Component}],execute:function(){i._RF.push({},"8ec21OeeVxEfbc1CgDYIMvZ","Enemy",void 0),p=r.ccclass,r.property,e("Enemy",(u=p("Enemy"),u(m=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,o(a(n),"enemyData",void 0),o(a(n),"enemyNow",void 0),n}t(n,e);var i=n.prototype;return i.onLoad=function(){this.giveEnemyProperty()},i.update=function(e){this.updateEnemyData()},i.updateEnemyData=function(){var e=this.enemyNow,n=c("Info",this.node);n.getComponent(s).string=e.Level+"\n血量："+e.MaxHp+"\n攻击力："+e.ATK,e.MaxHp<=0&&(n.getComponent(s).string="lose",e.status="lose")},i.giveEnemyProperty=function(){this.enemyData=JSON.parse(localStorage.getItem("enemyData"));var e,n=this.enemyData;e=Math.random()<n.gold.chance?n.gold:Math.random()<n.blue.chance&&Math.random()>n.gold.chance?n.blue:n.white,this.enemyNow=e},n}(l))||m)),i._RF.pop()}}}));

System.register("chunks:///Battle.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js","./Enemy.js"],(function(e,t){var a,n,i,o,r,s,l,c,u,y,m,p,h,v,d,f,g,D,P,b,C,T,H;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.defineProperty},function(e){s=e.cclegacy,l=e._decorator,c=e.Prefab,u=e.find,y=e.Button,m=e.Label,p=e.instantiate,h=e.Component,v=e.RichText},function(e){d=e.Player},function(e){f=e.Enemy}],execute:function(){s._RF.push({},"d56f6odbjhHCqU0stzg58sx","Battle",void 0),T=l.ccclass,H=l.property,l.integer,l.float,l.boolean,l.string,l.type,e("Battle",(g=T("Battle"),D=H({type:c}),g((C=a((b=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(o(t),"enemyPre",C,o(t)),r(o(t),"enemyData",void 0),r(o(t),"playerData",void 0),r(o(t),"enemyNodes",[]),r(o(t),"num",3),r(o(t),"result",void 0),r(o(t),"time",void 0),r(o(t),"playerTime",void 0),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.playerData=u("Canvas/Player").getComponent(d).playerData,this.getenemyData()},a.start=function(){u("Canvas/Battle/Button").on(y.EventType.CLICK,this.btnClick,this)},a.update=function(e){this.checkResult(),this.checkPlayer()},a.checkPlayer=function(){var e=this.playerData;u("Canvas/Battle/Player/Info").getComponent(m).string="HP:"+e.HP+"/"+e.MaxHp},a.checkResult=function(){this.result&&(u("Canvas/Battle/Result").getComponent(m).string=this.result,this.battleEnd())},a.battleEnd=function(){console.log("战斗结束");clearInterval(this.playerTime);for(var e=0;e<Object.keys(this.time).length;e++)clearInterval(this.time[e]);for(var t=0;t<this.enemyNodes.length;t++)this.enemyNodes[t].destroy();this.enemyNodes=[],this.result=null},a.generateEnemies=function(e){for(var t=0;t<e;t++){p(this.enemyPre).parent=u("Canvas/Battle/Enemies")}},a.btnClick=function(e){for(var t=this.num,a=0;a<t;a++){var n=p(this.enemyPre);n.parent=u("Canvas/Battle/Enemies"),this.enemyNodes.push(n)}this.battleProcess(t)},a.battleProcess=function(e){var t=this,a=this;this.time={};for(var n=function(e){var a=t.enemyNodes[e].getComponent(f).enemyNow;t.time[e]=setInterval((function(){u("Canvas/Battle/Player/Status").getComponent(v).string="-"+Number(a.ATK).toFixed(),t.playerData.HP=Number((t.playerData.HP-a.ATK).toFixed()),t.playerData.HP<=0&&(t.playerData.HP=0,t.result="fail",console.log("失败了"))}),a.AtkRate)},i=0;i<e;i++)n(i);!function e(t){var n=a.enemyNodes[t].getComponent(f).enemyNow;console.log(n);a.playerTime=setInterval((function(){(n.MaxHp=Number((n.MaxHp-a.playerData.ATK).toFixed()),"lose"==n.status&&t<a.num-1)&&(clearTimeout(a.playerTime),e(t+1));"lose"==n.status&&t==a.num-1&&(clearTimeout(a.playerTime),a.result="success",console.log("成功了"))}),a.playerData.AtkRate)}(0)},a.getenemyData=function(){this.enemyData=JSON.parse(localStorage.getItem("enemyData")),this.enemyData||(this.enemyData={white:{Level:"white",MaxHp:"200",ATK:"5",AtkRate:"300"},blue:{Level:"blue",MaxHp:"300",ATK:"10",chance:.3,AtkRate:"500"},gold:{Level:"gold",MaxHp:"500",ATK:"15",chance:.1,AtkRate:"200"}},localStorage.setItem("enemyData",JSON.stringify(this.enemyData))),console.log(this.enemyData)},t}(h)).prototype,"enemyPre",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=b))||P)),s._RF.pop()}}}));

System.register("chunks:///UI.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var o,n,a,l,i,r,s,C,p,c,y,g;return t({_dec:void 0,_class:void 0}),{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,l=t.Button,i=t.find,r=t.Sprite,s=t.Color,C=t.Animation,p=t.Component}],execute:function(){n._RF.push({},"4211e/PRFxGa4OlVYyIy4re","UI",void 0),g=a.ccclass,a.property,t("UI",(c=g("UI"),c(y=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){this.node.getChildByName("toBattle").getComponent(l).interactable=!1,this.node.getChildByName("toPlayer").on(l.EventType.CLICK,this.toPlayer,this),this.node.getChildByName("toBattle").on(l.EventType.CLICK,this.toBattle,this)},n.toPlayer=function(){i("Canvas/UI/toPlayer").getComponent(r).color=new s("#ffffff"),i("Canvas/UI/toBattle").getComponent(r).color=new s("#646464"),i("Canvas/Battle").getComponent(C).play("toright"),i("Canvas/Player").getComponent(C).play("PlayerToRight"),this.node.getChildByName("toPlayer").getComponent(l).interactable=!1,this.node.getChildByName("toBattle").getComponent(l).interactable=!0},n.toBattle=function(){i("Canvas/UI/toPlayer").getComponent(r).color=new s("#646464"),i("Canvas/UI/toBattle").getComponent(r).color=new s("#ffffff"),i("Canvas/Battle").getComponent(C).play("toleft"),i("Canvas/Player").getComponent(C).play("PlayerToLeft"),this.node.getChildByName("toPlayer").getComponent(l).interactable=!0,this.node.getChildByName("toBattle").getComponent(l).interactable=!1},e}(p))||y)),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["../Player.js","../Enemy.js","../Battle.js","../UI.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/ts/Player.js', 'chunks:///Player.js');
  r('project:///assets/ts/Enemy.js', 'chunks:///Enemy.js');
  r('project:///assets/ts/Battle.js', 'chunks:///Battle.js');
  r('project:///assets/ts/UI.js', 'chunks:///UI.js');
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});