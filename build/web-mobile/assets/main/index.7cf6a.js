System.register("chunks:///Player.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var a,n,i,o,r,s,l,P,p,c,y,u,d,v,C,h,f,D,H,L;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(t){a=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.defineProperty,o=t.assertThisInitialized,r=t.initializerDefineProperty},function(t){s=t.cclegacy,l=t._decorator,P=t.Prefab,p=t.find,c=t.Label,y=t.Button,u=t.instantiate,d=t.Component}],execute:function(){s._RF.push({},"f471054CdFNOoYxGcVmhC9I","Player",void 0),H=l.ccclass,L=l.property,t("Player",(v=H("Player"),C=L({type:P}),v((D=a((f=function(t){function e(){for(var e,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(o(e),"callback",void 0),i(o(e),"playerData",void 0),r(o(e),"Model",D,o(e)),i(o(e),"result",void 0),e}n(e,t);var a=e.prototype;return a.start=function(){this.result=p("Canvas/Battle/ScrollView/view/content/item").getComponent(c),this.getPlayerData(),p("Canvas/Player/ClearSave").on(y.EventType.CLICK,this.clickClearSave,this),this.usePoints(),this.secondHp()},a.update=function(t){this.updateUserInfo(),this.checkLevel(),this.HP()},a.HP=function(){var t=this.playerData;t.HP>t.MaxHp&&(t.HP=t.MaxHp)},a.secondHp=function(){var t=this.playerData;this.schedule(this.callback=function(){t.HP<t.MaxHp&&(t.HP=t.HP+t.HPS)},1)},a.clickClearSave=function(){var t=u(this.Model);p("Canvas/Player/Model")||(t.parent=p("Canvas/Player"),t.setPosition(0,0)),p("Canvas/Player/Model/Cancel").on(y.EventType.CLICK,(function(){t.destroy()}),this),p("Canvas/Player/Model/Confirm").on(y.EventType.CLICK,(function(){localStorage.removeItem("playerData"),window.location.reload()}),this)},a.getPlayerData=function(){this.playerData=JSON.parse(localStorage.getItem("playerData")),this.playerData||(this.playerData={MaxHp:20,EXP:0,ATK:2,Crit:.1,CritD:1.5,Level:1,LevelUpNeedExp:[0,5,20,50,100,"Max"],Points:10,HPS:1,addPoints:{MaxHp:0,ATK:0,Crit:0,CritD:0,HPS:0}},localStorage.setItem("playerData",JSON.stringify(this.playerData))),this.playerData.HP=this.playerData.MaxHp},a.setPlayerData=function(t){localStorage.setItem("playerData",JSON.stringify(t))},a.reset=function(t){this.playerData.HP=t},a.updateUserInfo=function(){var t=this.playerData;p("Info",this.node).getComponent(c).string="\n等级："+t.Level+"\n生命值："+t.HP+"/"+t.MaxHp+"\n攻击力："+t.ATK+"\n经验值："+t.EXP+"/"+t.LevelUpNeedExp[t.Level]+"\n暴击率："+(100*t.Crit).toFixed(2)+"%\n暴击伤害："+(100*t.CritD).toFixed(2)+"%\n每秒恢复："+t.HPS+"/s",p("Canvas/Player/Label").getComponent(c).string="使用天赋点 剩余"+t.Points},a.checkLevel=function(){var t=this.playerData,e=t.Level;if(t.EXP>=t.LevelUpNeedExp[e]&&"Max"!=t.LevelUpNeedExp[e]){t.Level++,t.EXP=t.EXP-t.LevelUpNeedExp[e];this.result.string="升级了！天赋点+3\n"+this.result.string,t.Points+=3,this.setPlayerData(t)}},a.usePoints=function(){var t=this.playerData;p("Canvas/Player/ResetPoints").on(y.EventType.CLICK,(function(){for(var e in t.addPoints){var a=t.addPoints[e];switch(e){case"MaxHp":t.MaxHp=t.MaxHp-2*a,t.Points+=a;break;case"ATK":t.ATK-=a,t.Points+=a;break;case"Crit":t.Crit=(Number(t.Crit)-.05*a).toFixed(2),t.Points+=a;break;case"CritD":t.CritD=(Number(t.CritD)-.1*a).toFixed(2),t.Points+=a;break;case"HPS":t.HPS=t.HPS-a,t.Points+=a}t.addPoints[e]=0}}),this),p("Canvas/Player/Layout/Button").on(y.EventType.CLICK,(function(){t.Points>0&&(t.MaxHp+=2,t.Points--,t.addPoints.MaxHp++,this.setPlayerData(t))}),this),p("Canvas/Player/Layout/Button-001").on(y.EventType.CLICK,(function(){t.Points>0&&(t.ATK++,t.Points--,t.addPoints.ATK++,this.setPlayerData(t))}),this),p("Canvas/Player/Layout/Button-002").on(y.EventType.CLICK,(function(){t.Points>0&&(t.Crit=(Number(t.Crit)+.05).toFixed(2),t.Points--,t.addPoints.Crit++,this.setPlayerData(t))}),this),p("Canvas/Player/Layout/Button-003").on(y.EventType.CLICK,(function(){t.Points>0&&(t.CritD=(Number(t.CritD)+.1).toFixed(2),t.Points--,t.addPoints.CritD++,this.setPlayerData(t))}),this),p("Canvas/Player/Layout/Button-004").on(y.EventType.CLICK,(function(){t.Points>0&&(t.HPS=t.HPS+1,t.Points--,t.addPoints.HPS++,this.setPlayerData(t))}),this)},a.formatNum=function(t,e){var a=Math.pow(10,e);return Number(parseInt((t*a).toString(),10)/a)},e}(d)).prototype,"Model",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h)),s._RF.pop()}}}));

System.register("chunks:///Enemy.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,r,n,o,c,a,s,u,l,p,f,d,y,v;return e({_dec:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){c=e.cclegacy,a=e._decorator,s=e.Component}],execute:function(){c._RF.push({},"8ec21OeeVxEfbc1CgDYIMvZ","Enemy",void 0),y=a.ccclass,v=a.property,e("Enemy",(u=y("Enemy"),u((f=i((p=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,n(o(t),"HP",f,o(t)),n(o(t),"ATK",d,o(t)),t}r(t,e);var i=t.prototype;return i.start=function(){},i.reset=function(e,t){this.HP=e,this.ATK=t},i.update=function(e){},t}(s)).prototype,"HP",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=i(p.prototype,"ATK",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=p))||l)),c._RF.pop()}}}));

System.register("chunks:///Battle.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js","./Enemy.js"],(function(t,n){var e,a,o,i,s,r,l,c,g,m,p,C,h,y,u;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){e=t.inheritsLoose,a=t.defineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,r=t.find,l=t.Label,c=t.UITransform,g=t.Button,m=t.Component},function(t){p=t.Player},function(t){C=t.Enemy}],execute:function(){i._RF.push({},"d56f6odbjhHCqU0stzg58sx","Battle",void 0),u=s.ccclass,s.property,s.integer,s.float,s.boolean,s.string,s.type,t("Battle",(h=u("Battle"),h(y=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i))||this,a(o(n),"callback",void 0),a(o(n),"startBtn",void 0),a(o(n),"enemyHp",10),a(o(n),"enemyATK",1.5),a(o(n),"battleShow",!0),n}e(n,t);var i=n.prototype;return i.start=function(){this.Battle()},i.update=function(t){var n=r("Canvas/Player").getComponent(p).playerData,e=r("Canvas/Battle/Enemy").getComponent(C);r("Canvas/Battle/Player/Info").getComponent(l).string="Player\nHP："+n.HP.toString(),r("Canvas/Battle/Enemy/Info").getComponent(l).string="Enemy\nHP："+e.HP.toString()+"\nATK: "+e.ATK.toString(),r("Canvas/Battle/ScrollView/view/content").getComponent(c).height=r("Canvas/Battle/ScrollView/view/content/item").getComponent(c).height},i.Battle=function(){this.startBtn=r("Canvas/Battle/Button"),this.startBtn.on(g.EventType.CLICK,this.btnClick,this)},i.btnClick=function(t){r("Canvas/Player").getComponent(p),r("Canvas/Battle/Enemy").getComponent(C);this.startBtn.getComponent(g).interactable=!1,this.checkNums()},i.checkNums=function(){var t=r("Canvas/Battle/ScrollView/view/content/item").getComponent(l);t.string="\n"+t.string;var n=r("Canvas/Player").getComponent(p).playerData,e=r("Canvas/Battle/Enemy").getComponent(C);this.schedule(this.callback=function(){var a,o=n.ATK;if(Math.random()<n.Crit?(o=n.ATK*n.CritD,t.string="暴击了！你造成了"+o+"点伤害，受到了"+e.ATK+"点伤害\n"+t.string):t.string="你造成了"+o+"点伤害，受到了"+e.ATK+"点伤害\n"+t.string,e.HP=Number((e.HP-o).toFixed(2)),n.HP-=e.ATK,n.HP<=0&&(n.HP=0,a="战斗失败\n"+t.string),e.HP<=0){n.EXP+=3,this.enemyHp+=4,this.enemyATK+=1,e.HP=0,a="战斗成功，获得3点经验值\n"+t.string}(n.HP<=0||e.HP<=0)&&(t.string=a,r("Canvas/Player").getComponent(p).setPlayerData(n),r("Canvas/Player").getComponent(p).reset(n.MaxHp),e.reset(this.enemyHp,this.enemyATK),this.startBtn.getComponent(g).interactable=!0,this.unschedule(this.callback))},1)},n}(m))||y)),i._RF.pop()}}}));

System.register("chunks:///UI.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var o,n,a,l,i,r,s,C,p,c,y,g;return t({_dec:void 0,_class:void 0}),{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,l=t.Button,i=t.find,r=t.Sprite,s=t.Color,C=t.Animation,p=t.Component}],execute:function(){n._RF.push({},"4211e/PRFxGa4OlVYyIy4re","UI",void 0),g=a.ccclass,a.property,t("UI",(c=g("UI"),c(y=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){this.node.getChildByName("toBattle").getComponent(l).interactable=!1,this.node.getChildByName("toPlayer").on(l.EventType.CLICK,this.toPlayer,this),this.node.getChildByName("toBattle").on(l.EventType.CLICK,this.toBattle,this)},n.toPlayer=function(){i("Canvas/UI/toPlayer").getComponent(r).color=new s("#ffffff"),i("Canvas/UI/toBattle").getComponent(r).color=new s("#646464"),i("Canvas/Battle").getComponent(C).play("toright"),i("Canvas/Player").getComponent(C).play("PlayerToRight"),this.node.getChildByName("toPlayer").getComponent(l).interactable=!1,this.node.getChildByName("toBattle").getComponent(l).interactable=!0},n.toBattle=function(){i("Canvas/UI/toPlayer").getComponent(r).color=new s("#646464"),i("Canvas/UI/toBattle").getComponent(r).color=new s("#ffffff"),i("Canvas/Battle").getComponent(C).play("toleft"),i("Canvas/Player").getComponent(C).play("PlayerToLeft"),this.node.getChildByName("toPlayer").getComponent(l).interactable=!0,this.node.getChildByName("toBattle").getComponent(l).interactable=!1},e}(p))||y)),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["../Player.js","../Enemy.js","../Battle.js","../UI.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/ts/Player.js', 'chunks:///Player.js');
  r('project:///assets/ts/Enemy.js', 'chunks:///Enemy.js');
  r('project:///assets/ts/Battle.js', 'chunks:///Battle.js');
  r('project:///assets/ts/UI.js', 'chunks:///UI.js');
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});