System.register("chunks:///Player.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,a){var t,r,n,i,o,l,s,c,p,y,u,d,v,P,f,h,C,D,H,m;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.defineProperty,i=e.assertThisInitialized,o=e.initializerDefineProperty},function(e){l=e.cclegacy,s=e._decorator,c=e.Prefab,p=e.find,y=e.Button,u=e.instantiate,d=e.Label,v=e.Component}],execute:function(){l._RF.push({},"f471054CdFNOoYxGcVmhC9I","Player",void 0),H=s.ccclass,m=s.property,e("Player",(P=H("Player"),f=m({type:c}),P((D=t((C=function(e){function a(){for(var a,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return a=e.call.apply(e,[this].concat(r))||this,n(i(a),"callback",void 0),n(i(a),"playerData",void 0),o(i(a),"Model",D,i(a)),a}r(a,e);var t=a.prototype;return t.onLoad=function(){this.getPlayerData()},t.start=function(){p("Canvas/Player/ClearSave").on(y.EventType.CLICK,this.clickClearSave,this),this.secondHp()},t.update=function(e){this.updateUserInfo(),this.HP()},t.HP=function(){var e=this.playerData;e.HP>e.MaxHp&&(e.HP=e.MaxHp)},t.secondHp=function(){var e=this.playerData;this.schedule(this.callback=function(){e.HP<e.MaxHp&&(e.HP=Number(e.HP)+Number(Number(e.HPS).toFixed(2)))},1)},t.clickClearSave=function(){var e=u(this.Model);p("Canvas/Player/Model")||(e.parent=p("Canvas/Player"),e.setPosition(0,0)),p("Canvas/Player/Model/Cancel").on(y.EventType.CLICK,(function(){e.destroy()}),this),p("Canvas/Player/Model/Confirm").on(y.EventType.CLICK,(function(){localStorage.removeItem("playerData"),localStorage.removeItem("enemyData"),window.location.reload()}),this)},t.getPlayerData=function(){this.playerData=JSON.parse(localStorage.getItem("playerData")),this.playerData||(this.playerData={MaxHp:1e3,EXP:0,ATK:40,AtkRate:500,Crit:.1,CritD:1.5,Level:1,LevelUpNeedExp:[0,5,20,50,100,"Max"],Points:10,HPS:5.5,addPoints:{MaxHp:0,ATK:0,Crit:0,CritD:0,HPS:0}},localStorage.setItem("playerData",JSON.stringify(this.playerData))),this.playerData.HP=this.playerData.MaxHp},t.setPlayerData=function(e){localStorage.setItem("playerData",JSON.stringify(e))},t.reset=function(e){this.playerData.HP=e},t.updateUserInfo=function(){var e=this.playerData;p("Info",this.node).getComponent(d).string="\n等级："+e.Level+"\n生命值："+e.HP+"/"+e.MaxHp+"\n攻击力："+e.ATK+"\n经验值："+e.EXP+"/"+e.LevelUpNeedExp[e.Level]+"\n攻击速度："+100*Number((Number(e.AtkRate)/1e3).toFixed(2))+"%\n每秒恢复生命值："+e.HPS+"/s"},a}(v)).prototype,"Model",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=C))||h)),l._RF.pop()}}}));

System.register("chunks:///Enemy.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,n){var t,o,a,i,r,s,c,l,u,y,p;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inheritsLoose,o=e.defineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,s=e.find,c=e.Label,l=e.Component}],execute:function(){i._RF.push({},"8ec21OeeVxEfbc1CgDYIMvZ","Enemy",void 0),p=r.ccclass,r.property,e("Enemy",(u=p("Enemy"),u(y=function(e){function n(){for(var n,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return n=e.call.apply(e,[this].concat(i))||this,o(a(n),"enemyData",void 0),o(a(n),"enemyNow",void 0),n}t(n,e);var i=n.prototype;return i.onLoad=function(){this.giveEnemyProperty()},i.update=function(e){this.updateEnemyData()},i.updateEnemyData=function(){var e=this.enemyNow,n=s("Info",this.node);n.getComponent(c).string=e.Level+"\n血量："+e.MaxHp+"\n攻击力："+e.ATK,e.MaxHp<=0&&(n.getComponent(c).string="lose",e.status="lose")},i.giveEnemyProperty=function(){this.enemyData=JSON.parse(JSON.stringify(globalThis.enemyData));var e,n=this.enemyData;console.log(n),e=Math.random()<n.gold.chance?n.gold:Math.random()<n.blue.chance&&Math.random()>n.gold.chance?n.blue:n.white,this.enemyNow=e},n}(l))||y)),i._RF.pop()}}}));

System.register("chunks:///Battle.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js","./Enemy.js"],(function(e,t){var a,n,o,i,r,s,l,m,u,c,y,h,p,d,v,g,f,N,b,C,x,B,T;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.defineProperty},function(e){s=e.cclegacy,l=e._decorator,m=e.Prefab,u=e.find,c=e.Button,y=e.Label,h=e.instantiate,p=e.RichText,d=e.Component},function(e){v=e.Player},function(e){g=e.Enemy}],execute:function(){s._RF.push({},"d56f6odbjhHCqU0stzg58sx","Battle",void 0),B=l.ccclass,T=l.property,l.integer,l.float,l.boolean,l.string,l.type,e("Battle",(f=B("Battle"),N=T({type:m}),f((x=a((C=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,o(i(t),"enemyPre",x,i(t)),r(i(t),"enemyData",void 0),r(i(t),"playerData",void 0),r(i(t),"enemyNodes",[]),r(i(t),"num",3),r(i(t),"result",void 0),r(i(t),"time",void 0),r(i(t),"playerTime",void 0),r(i(t),"gameStartTime",void 0),r(i(t),"enemyNodesIndex",0),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.playerData=u("Canvas/Player").getComponent(v).playerData,this.getenemyData()},a.start=function(){this.gameStart(),u("Canvas/Battle/SpriteSplash").on("touch-start",this.playerNormalAtk,this),u("Canvas/Battle/SpriteSplash").on("touch-end",this.playerNormalAtkStop,this),u("Canvas/Battle/ScrollView/view/content/Button").on(c.EventType.CLICK,this.Button,this),u("Canvas/Battle/ScrollView/view/content/Button-001").on(c.EventType.CLICK,this.Button,this),u("Canvas/Battle/ScrollView/view/content/Button-002").on(c.EventType.CLICK,this.Button,this)},a.Button=function(e){switch(console.log(e.node.name),e.node.name){case"Button":localStorage.setItem("hard","1");break;case"Button-001":localStorage.setItem("hard","1.5");break;case"Button-002":localStorage.setItem("hard","2")}this.getenemyData()},a.update=function(e){this.checkResult(),this.checkPlayer()},a.checkPlayer=function(){var e=this.playerData;u("Canvas/Battle/Player/Info").getComponent(y).string="HP:"+e.HP+"/"+e.MaxHp},a.checkResult=function(){this.result&&(u("Canvas/Battle/Result").getComponent(y).string="失败",this.battleEnd()),this.enemyNodes.length>0&&"lose"==this.enemyNodes[this.num-1].getComponent(g).enemyNow.status&&(u("Canvas/Battle/Result").getComponent(y).string="成功",this.battleEnd())},a.battleEnd=function(){console.log("战斗结束");for(var e=0;e<Object.keys(this.time).length;e++)clearInterval(this.time[e]);for(var t=0;t<this.enemyNodes.length;t++)this.enemyNodes[t].destroy();this.enemyNodes=[],this.playerData.HP=this.playerData.MaxHp,this.result=null,this.enemyNodesIndex=0,this.gameStart()},a.gameStart=function(){var e=this,t=3,a=null;a=setInterval((function(){t>0?(u("Canvas/Battle/Result").getComponent(y).string=t.toString(),t--):clearInterval(a)}),1e3),clearTimeout(this.gameStartTime),this.gameStartTime=setTimeout((function(){u("Canvas/Battle/Result").getComponent(y).string="战斗开始";for(var t=e.num,a=0;a<t;a++){var n=h(e.enemyPre);n.parent=u("Canvas/Battle/Enemies"),e.enemyNodes.push(n)}console.log(e.enemyNodes),e.battleProcess(t)}),4e3)},a.battleProcess=function(e){var t=this;this.time={};for(var a=function(e){var a=t.enemyNodes[e].getComponent(g).enemyNow;t.time[e]=setInterval((function(){u("Canvas/Battle/Player/Status").getComponent(p).string="-"+Number(a.ATK).toFixed(),t.playerData.HP=Number((t.playerData.HP-a.ATK).toFixed()),t.playerData.HP<=0&&(t.playerData.HP=0,t.result="fail")}),a.AtkRate)},n=0;n<e;n++)a(n)},a.playerNormalAtk=function(){this.playerAtk()},a.playerNormalAtkStop=function(){clearTimeout(this.playerTime)},a.playerAtk=function(){var e=this,t=this;t.playerTime=setInterval((function(){var a=e.enemyNodesIndex;if(t.enemyNodes.length>0){var n=t.enemyNodes[a].getComponent(g).enemyNow;n.MaxHp=Number((n.MaxHp-t.playerData.ATK).toFixed()),u("RichText",t.enemyNodes[a]).getComponent(p).string="-"+Number(t.playerData.ATK).toFixed(),"lose"==n.status&&a<t.num-1&&(clearTimeout(t.playerTime),e.enemyNodesIndex=a+1,t.playerAtk())}}),t.playerData.AtkRate)},a.getenemyData=function(){var e=this,t=localStorage.getItem("hard");function a(t){e.enemyData={white:{Level:"white",MaxHp:Number((200*t).toFixed(2)),ATK:Number((5*t).toFixed(2)),AtkRate:Number((500/t).toFixed(2))},blue:{Level:"blue",MaxHp:Number((300*t).toFixed(2)),ATK:Number((10*t).toFixed(2)),chance:.3,AtkRate:Number((300/t).toFixed(2))},gold:{Level:"gold",MaxHp:Number((500*t).toFixed(2)),ATK:Number((15*t).toFixed(2)),chance:.1,AtkRate:Number((200/t).toFixed(2))}},globalThis.enemyData=e.enemyData,console.log(e.enemyData)}t?a(Number(t)):(localStorage.setItem("hard","1"),a(1))},t}(d)).prototype,"enemyPre",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b)),s._RF.pop()}}}));

System.register("chunks:///UI.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var o,n,a,l,i,r,s,C,p,c,y,g;return t({_dec:void 0,_class:void 0}),{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,l=t.Button,i=t.find,r=t.Sprite,s=t.Color,C=t.Animation,p=t.Component}],execute:function(){n._RF.push({},"4211e/PRFxGa4OlVYyIy4re","UI",void 0),g=a.ccclass,a.property,t("UI",(c=g("UI"),c(y=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){this.node.getChildByName("toBattle").getComponent(l).interactable=!1,this.node.getChildByName("toPlayer").on(l.EventType.CLICK,this.toPlayer,this),this.node.getChildByName("toBattle").on(l.EventType.CLICK,this.toBattle,this)},n.toPlayer=function(){i("Canvas/UI/toPlayer").getComponent(r).color=new s("#ffffff"),i("Canvas/UI/toBattle").getComponent(r).color=new s("#646464"),i("Canvas/Battle").getComponent(C).play("toright"),i("Canvas/Player").getComponent(C).play("PlayerToRight"),this.node.getChildByName("toPlayer").getComponent(l).interactable=!1,this.node.getChildByName("toBattle").getComponent(l).interactable=!0},n.toBattle=function(){i("Canvas/UI/toPlayer").getComponent(r).color=new s("#646464"),i("Canvas/UI/toBattle").getComponent(r).color=new s("#ffffff"),i("Canvas/Battle").getComponent(C).play("toleft"),i("Canvas/Player").getComponent(C).play("PlayerToLeft"),this.node.getChildByName("toPlayer").getComponent(l).interactable=!0,this.node.getChildByName("toBattle").getComponent(l).interactable=!1},e}(p))||y)),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["../Player.js","../Enemy.js","../Battle.js","../UI.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/ts/Player.js', 'chunks:///Player.js');
  r('project:///assets/ts/Enemy.js', 'chunks:///Enemy.js');
  r('project:///assets/ts/Battle.js', 'chunks:///Battle.js');
  r('project:///assets/ts/UI.js', 'chunks:///UI.js');
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});