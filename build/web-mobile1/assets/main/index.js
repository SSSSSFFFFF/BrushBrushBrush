System.register("chunks:///Player.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var a,r,n,i,o,l,s,p,c,y,u,v,d,f,h,C,D,P,g,L;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.defineProperty,i=e.assertThisInitialized,o=e.initializerDefineProperty},function(e){l=e.cclegacy,s=e._decorator,p=e.Prefab,c=e.find,y=e.Button,u=e.instantiate,v=e.Label,d=e.Component}],execute:function(){l._RF.push({},"f471054CdFNOoYxGcVmhC9I","Player",void 0),g=s.ccclass,L=s.property,e("Player",(f=g("Player"),h=L({type:p}),f((P=a((D=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(i(t),"playerData",void 0),o(i(t),"Model",P,i(t)),t}r(t,e);var a=t.prototype;return a.start=function(){this.getPlayerData(),c("Canvas/Player/ClearSave").on(y.EventType.CLICK,this.clickClearSave,this)},a.update=function(e){this.updateUserInfo()},a.clickClearSave=function(){var e=u(this.Model);e.parent=c("Canvas/Player"),e.setPosition(0,0),c("Canvas/Player/Model/Cancel").on(y.EventType.CLICK,(function(){e.destroy()}),this),c("Canvas/Player/Model/Confirm").on(y.EventType.CLICK,(function(){localStorage.removeItem("playerData"),window.location.reload()}),this)},a.getPlayerData=function(){this.playerData=JSON.parse(localStorage.getItem("playerData")),this.playerData||(this.playerData={MaxHp:20,EXP:0,ATK:2,Crit:.1,CritD:1.5,Level:1,LevelUpNeedExp:[0,5,20,50]},localStorage.setItem("playerData",JSON.stringify(this.playerData))),this.playerData.HP=this.playerData.MaxHp},a.setPlayerData=function(e){localStorage.setItem("playerData",JSON.stringify(e))},a.reset=function(e){this.playerData.HP=e},a.updateUserInfo=function(){var e=this.playerData;c("Info",this.node).getComponent(v).string="\n等级："+e.Level+"\n生命值："+e.HP+"/"+e.MaxHp+"\n攻击力："+e.ATK+"\n经验值："+e.EXP+"/"+e.LevelUpNeedExp[e.Level]+"\n暴击率："+100*e.Crit+"%\n暴击伤害："+100*e.CritD+"%"},a.checkLevel=function(){for(var e=1,t=this.playerData;t.EXP>=t.LevelUpNeedExp[e];)t.Level++,this.setPlayerData(t),e++},t}(d)).prototype,"Model",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=D))||C)),l._RF.pop()}}}));

System.register("chunks:///Enemy.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,i,n,o,c,a,s,u,l,p,f,d,y,v;return e({_dec:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){c=e.cclegacy,a=e._decorator,s=e.Component}],execute:function(){c._RF.push({},"8ec21OeeVxEfbc1CgDYIMvZ","Enemy",void 0),y=a.ccclass,v=a.property,e("Enemy",(u=y("Enemy"),u((f=r((p=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(o(t),"HP",f,o(t)),n(o(t),"ATK",d,o(t)),t}i(t,e);var r=t.prototype;return r.start=function(){},r.reset=function(e){this.HP=e},r.update=function(e){},t}(s)).prototype,"HP",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=r(p.prototype,"ATK",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),l=p))||l)),c._RF.pop()}}}));

System.register("chunks:///Battle.js",["./_virtual/_rollupPluginBabelHelpers.js","cc","./Player.js","./Enemy.js"],(function(t,n){var e,a,o,i,s,r,l,c,p,g,C,m,v,h,y;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){e=t.inheritsLoose,a=t.defineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,r=t.find,l=t.Label,c=t.UITransform,p=t.Button,g=t.Component},function(t){C=t.Player},function(t){m=t.Enemy}],execute:function(){i._RF.push({},"d56f6odbjhHCqU0stzg58sx","Battle",void 0),y=s.ccclass,s.property,s.integer,s.float,s.boolean,s.string,s.type,t("Battle",(v=y("Battle"),v(h=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return n=t.call.apply(t,[this].concat(i))||this,a(o(n),"callback",void 0),a(o(n),"startBtn",void 0),a(o(n),"enemyHp",10),a(o(n),"battleShow",!0),n}e(n,t);var i=n.prototype;return i.start=function(){this.Battle()},i.update=function(t){var n=r("Canvas/Player").getComponent(C).playerData,e=r("Canvas/Battle/Enemy").getComponent(m);r("Canvas/Battle/Player/Info").getComponent(l).string="Player\nHP："+n.HP.toString(),r("Canvas/Battle/Enemy/Info").getComponent(l).string="Enemy\nHP："+e.HP.toString()+"\nATK: "+e.ATK.toString(),r("Canvas/Battle/ScrollView/view/content").getComponent(c).height=r("Canvas/Battle/ScrollView/view/content/item").getComponent(c).height},i.Battle=function(){this.startBtn=r("Canvas/Battle/Button"),this.startBtn.on(p.EventType.CLICK,this.btnClick,this)},i.btnClick=function(t){r("Canvas/Player").getComponent(C),r("Canvas/Battle/Enemy").getComponent(m);this.startBtn.getComponent(p).interactable=!1,this.checkNums()},i.checkNums=function(){var t=r("Canvas/Battle/ScrollView/view/content/item").getComponent(l);t.string="\n"+t.string;var n=r("Canvas/Player").getComponent(C).playerData,e=r("Canvas/Battle/Enemy").getComponent(m);this.schedule(this.callback=function(){var a,o=n.ATK;Math.random()<n.Crit?(o=n.ATK*n.CritD,t.string="暴击了！你造成了"+o+"点伤害，受到了"+e.ATK+"点伤害\n"+t.string):t.string="你造成了"+o+"点伤害，受到了"+e.ATK+"点伤害\n"+t.string,e.HP-=o,n.HP-=e.ATK,n.HP<=0&&(n.HP=0,a="战斗失败\n"+t.string),e.HP<=0&&(n.MaxHp++,n.EXP++,r("Canvas/Player").getComponent(C).checkLevel(),this.enemyHp+=4,e.HP=0,a="战斗成功\n"+t.string),(n.HP<=0||e.HP<=0)&&(t.string=a,r("Canvas/Player").getComponent(C).setPlayerData(n),r("Canvas/Player").getComponent(C).reset(n.MaxHp),e.reset(this.enemyHp),this.startBtn.getComponent(p).interactable=!0,this.unschedule(this.callback))},1)},n}(g))||h)),i._RF.pop()}}}));

System.register("chunks:///UI.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var o,n,a,l,r,i,s,p,c,f,y,C;return t({_dec:void 0,_class:void 0}),{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,l=t.Button,r=t.find,i=t.Sprite,s=t.Color,p=t.Animation,c=t.Component}],execute:function(){n._RF.push({},"4211e/PRFxGa4OlVYyIy4re","UI",void 0),C=a.ccclass,a.property,t("UI",(f=C("UI"),f(y=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.start=function(){this.node.getChildByName("toPlayer").on(l.EventType.CLICK,this.toPlayer,this),this.node.getChildByName("toBattle").on(l.EventType.CLICK,this.toBattle,this)},n.toPlayer=function(){r("Canvas/UI/toPlayer").getComponent(i).color=new s("#ffffff"),r("Canvas/UI/toBattle").getComponent(i).color=new s("#646464"),r("Canvas/Battle").getComponent(p).play("toright"),r("Canvas/Player").getComponent(p).play("PlayerToRight")},n.toBattle=function(){r("Canvas/UI/toPlayer").getComponent(i).color=new s("#646464"),r("Canvas/UI/toBattle").getComponent(i).color=new s("#ffffff"),r("Canvas/Battle").getComponent(p).play("toleft"),r("Canvas/Player").getComponent(p).play("PlayerToLeft")},e}(c))||y)),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["../Player.js","../Enemy.js","../Battle.js","../UI.js"],(function(n,t){return{setters:[function(n){},function(n){},function(n){},function(n){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/js/Player.js', 'chunks:///Player.js');
  r('project:///assets/js/Enemy.js', 'chunks:///Enemy.js');
  r('project:///assets/js/Battle.js', 'chunks:///Battle.js');
  r('project:///assets/js/UI.js', 'chunks:///UI.js');
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});